<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            background: #186191;
        }

        #inputstyle {
            font-family: Arial;
            font-size: 14px;
        }

        div {
            color: white;
        }

        a {
            text-decoration: none;
            color: white;
        }
    </style>
</head>
<body>
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-app.js"></script>
<!-- TODO: Add SDKs for Firebase products that you want to use
    https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>

<script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
        apiKey: "AIzaSyBvgCw0PHP1CCITIb23FR2WZ72xR7q4F98",
        authDomain: "cohort-connect-d8de7.firebaseapp.com",
        databaseURL: "https://cohort-connect-d8de7.firebaseio.com",
        projectId: "cohort-connect-d8de7",
        storageBucket: "cohort-connect-d8de7.appspot.com",
        messagingSenderId: "1077255292403",
        appId: "1:1077255292403:web:979011f32859177ee93e86",
        measurementId: "G-99GGCCMMFG"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    // reference to firestore db
    var db = firebase.firestore();
</script>
<script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
<link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css"/>
<script>
    // Initialize the FirebaseUI Widget using Firebase.
    var ui = new firebaseui.auth.AuthUI(firebase.auth());
</script>
<!-- The surrounding HTML is left untouched by FirebaseUI.
 Your app may use that space for branding, controls and other customizations.-->

<center>

    <br><br><br><br>
    <img src="logo.png" id="logo">
    <br><br><br><br>

    <div id="firebaseui-auth-container"></div>
    <div id="loader">Loading...</div>
    <!-- <script>
        var uiConfig = {
            callbacks: {
                signInSuccessWithAuthResult: function (authResult, redirectUrl) {
                    // User successfully signed in.
                    // Return type determines whether we continue the redirect automatically
                    // or whether we leave that to developer to handle.
                    return true;
                },
                uiShown: function () {
                    // The widget is rendered.
                    // Hide the loader.
                    document.getElementById('loader').style.display = 'none';
                }
            },
            // Will use popup for IDP Providers sign-in flow instead of the default, redirect.
            signInFlow: 'popup',
            signInSuccessUrl: 'index3.html', // <-- just a space filler

            signInOptions: [
                // Leave the lines as is for the providers you want to offer your users.
                // firebase.auth.GoogleAuthProvider.PROVIDER_ID,
                //firebase.auth.FacebookAuthProvider.PROVIDER_ID,
                //firebase.auth.TwitterAuthProvider.PROVIDER_ID,
                //firebase.auth.GithubAuthProvider.PROVIDER_ID,
                firebase.auth.EmailAuthProvider.PROVIDER_ID,
                //firebase.auth.PhoneAuthProvider.PROVIDER_ID
            ],
            // Terms of service url.
            tosUrl: '<your-tos-url>',
            // Privacy policy url.
            privacyPolicyUrl: '<your-privacy-policy-url>'
        };
        // The start method will wait until the DOM is loaded.
        ui.start('#firebaseui-auth-container', uiConfig);


    </script> -->
</center>

<div id="wow">let's read from databse: <span id=data>....</span></div>
<div id="results"></div>
<div id="interests"></div>
<script>
    function AddUser(user_id, u_first, u_last, u_age, interests) {
        db.collection("users").doc(user_id).set({
            firstName: u_first, // str
            lastName: u_last, // str
            age: u_age, // numb
            interests: interests //list
        })
            .then(function () {
                console.log("Document successfully written!");
            })
            .catch(function (error) {
                console.error("Error writing document: ", error);
            });
    }
    // update interest as an array
    function updateInterests(user_id, interests) {
        db.collection("users").doc(user_id).update({
            Interests: interests //list
        }).then(function () {
            console.log("Frank food updated");
        });
    }

    // getting names of users
    function GetFirstName(category, areaId) {
        var dbRef = db.collection(category).get().then(function (querySnapshot) {
            querySnapshot.forEach(function (doc) {
                let interests = doc.data().interests;
                interests.forEach((item =>{
                    var para = document.createElement("p");
                    para.innerHTML = item;
                    document.getElementById(areaId).appendChild(para);
                }))
            })
        })
            .catch(function (error) {
                console.log("error " + error)
            })
    }

    function Delete(category, element) {
        db.collection(category).doc(element).delete().then(function () {
            console.log("Document successfully deleted!");
        }).catch(function (error) {
            console.error("Error removing document: ", error);
        });
    }
    GetFirstName("users", "results");
    // Delete("students", "Rachel");

    // document.getElementById("wow").innerHTML =

</script>
</body>
</html>
